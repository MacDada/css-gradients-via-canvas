<!DOCTYPE html>
<html lang="en">
<head>
    <title>CSS Gradients via Canvas</title>
	<style>
	#linear1 { width:130px; height:130px; border:2px solid black; padding: 10px; 
		   background:-webkit-gradient(linear, left top, left bottom, from(#00abeb), to(#fff), color-stop(0.5, #fff), color-stop(0.5, #66cc00));
		   background:-moz-gradient(linear, left top, left bottom, from(#00abeb), to(#fff), color-stop(0.5, #fff), color-stop(0.5, #66cc00));
		   background:-o-gradient(linear, left top, left bottom, from(#00abeb), to(#fff), color-stop(0.5, #fff), color-stop(0.5, #66cc00));
		   background:gradient(linear, left top, left bottom, from(#00abeb), to(#fff), color-stop(0.5, #fff), color-stop(0.5, #66cc00));
		   /*-webkit-background-origin: padding-box; -webkit-background-clip: content-box;*/ }
	
	#linear2 {
			border:2px solid black;
			width:130px; height:130px;
			background-image: -webkit-gradient(linear, 0% 25%, 75% 100%,
									 from(red),
									 to(purple),
									 color-stop(.2, orange),
									 color-stop(.4, yellow),
									 color-stop(.6, green),
									 color-stop(.8, blue));
	
	}
	
	#radial1 { width:150px; height:150px; border:2px solid black;
		   background: -webkit-gradient(radial, 45 45, 10, 52 50, 30, from(#A7D30C), to(rgba(1,159,98,0)), color-stop(90%, #019F62)),
					   -webkit-gradient(radial, 105 105, 20, 112 120, 50, from(#ff5f98), to(rgba(255,1,136,0)), color-stop(75%, #ff0188)),
					   -webkit-gradient(radial, 95 15, 15, 102 20, 40, from(#00c9ff), to(rgba(0,201,255,0)), color-stop(80%, #00b5e2)),
					   -webkit-gradient(radial, 0 150, 50, 0 140, 90, from(#f4f201), to(rgba(228, 199,0,0)), color-stop(80%, #e4c700)); }
	
	
	/* Play around with some interactivity; requires manual mouseover/mouseout
	handlers to be attached with Javascript to refresh CSS Gradients when box
	is resized, see script and comments in footer. */
	#linear2 {
		border-color:gray;
		border-style:outset;
		cursor:pointer;
	}
	html:not(.css-gradients-via-canvas) #linear2:active,
	#linear2.mousedown {
		width:400px;
		border-style:inset;
	}
	</style>
</head>
<body>
	
    <h1>CSS Gradients via Canvas</h1>
	<p>This project implements a subset of WebKit's <a href="http://webkit.org/blog/175/introducing-css-gradients/" title="Introducing CSS Gradients">CSS Gradients proposal</a>
	in browsers that implement the HTML5 <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html"><code>canvas</code> element</a>.
	To use, simply include <a href="css-gradients-via-canvas.js">css-gradients-via-canvas.js</a> on a page that has <code>document.querySelectorAll</code> available
	or one that includes jQuery, Prototype, or Sizzle; if you ensure <code>document.querySelectorAll</code> is available, this implementation has no external dependencies.</p>
	
	<p>CSS Gradients via Canvas works in Firefox 2/3+, and Opera 9.64. Safari and Chrome have native implementations of CSS Gradients since they employ WebKit.
	This implementation does <em>not</em> work in Internet Explorer since it does not support Canvas, although IE8 does support data: URIs, which is a prerequisite.
	When/if Gears' <a href="http://code.google.com/apis/gears/api_canvas.html">Canvas API</a> fully implements the HTML5 canvas specification, then this implementation
	should be tweakable to work in IE8. In the mean time, rudamentary gradients may be achived in IE by means of its non-standard
	<a href="http://msdn.microsoft.com/en-us/library/ms532997%28VS.85%29.aspx">gradient filter</a> functionality.</p>
	
	<p>The implementation works by parsing all stylesheets upon page load (<code>DOMContentLoaded</code>), and searches for all instances of CSS gradients being
	used as <em>background images</em> (unlike WebKit, this implementation does not allow you to use gradients for border images, list bullets, or generated content).
	All elements that 
	</p>
	
	<h2>Examples</h2>
	<p>The following two boxes are from the <a href="http://trac.webkit.org/browser/trunk/LayoutTests//fast/gradients/simple-gradients.html?format=raw">Background
	Gradients Example</a> from WebKit <small>(disabling a couple WebKit-only background-* properties in the first example)</small>:</p>
	<p id="linear1" class='gradient'></p>
	<p id="radial1" class='gradient'></p>
	
	<p>Here is a bonus diagonal rainbow! Clicking on the element causes its width to increase and its gradient will be adjusted.</p>
	<p id="linear2" class='gradient'></p>
	
	<hr />
	<footer>
		<address><a href="http://weston.ruter.net/" rel="author">Weston Ruter</a> @ <a href="http://shepherd-interactive.com/">Shepherd Interactive</a></address>
		2009-07-24
	</footer>
	
	<!-- jQuery, Prototype, and Sizzle looked for in the case that document.querySelectorAll is not available;
	if using another library, please make sure that document.querySelectorAll is implemented -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js"></script>
	
	<script src="css-gradients-via-canvas.js"></script>
	<script>
	//Add mousedown/mouseup event handlers to correspond with the :active rule that changes the element's width
	// because the CSS Gradient needs to be refreshed because the box size changes; note that we add the class manually
	// because CSS rules aren't applied before the corresponding events are triggered (thus the box would not
	// be resized when the event handler inspects it).
	jQuery(function($){
		$('#linear2')
		  .mousedown(function(){ $(this).addClass('mousedown');    if(this.refreshCssGradient) this.refreshCssGradient(); })
		  .mouseup(function(){   $(this).removeClass('mousedown'); if(this.refreshCssGradient) this.refreshCssGradient(); });
	});
	</script>
</body>
</html>
